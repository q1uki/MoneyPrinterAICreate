# MoneyPrinterAICreate
## 特点
本短视频生成器在GitHub开源项目
[MoneyPrinterTurbo](https://github.com/harry0703/MoneyPrinterTurbo)的基础上，接入了万相通义 wan2.1 ai文生视频、图生视频作为剪辑素材的功能，素材更加丰富。支持分镜大纲与提示词修改，视频生成更可控。

## 界面
![set](https://github.com/user-attachments/assets/a39740fc-ba78-43a9-91c6-0be32312eef8)
![script](https://github.com/user-attachments/assets/e527bcc4-d9c8-4ef9-ad75-b182a8e7d009)
![videoset](https://github.com/user-attachments/assets/9ea38b4a-5341-42ea-b84f-5686ac1bbedc)
![material](https://github.com/user-attachments/assets/212d630c-df7a-4f76-bd44-2d2e1ae277ad)

## 工作流程
利用语言大模型生成视频文案和大纲、提示词（可人工修改），阿里最新的ai生成视频模型通义万相Wan2.1生成视频素材，最后自动拼接剪辑为带有字幕、配音、配乐的广告短视频。

## 隐私问题
wan21生成视频功能使用的是官方提供的试用api，上传的图片均会被收集，请注意不要上传个人隐私相关的图片。

## 使用说明
1. 按照[MoneyPrinterTurbo](https://github.com/harry0703/MoneyPrinterTurbo)进行部署，若为windows，一键部署后将MoneyPrinterTurbo整个文件夹替换为MoneyPrinterAICreate，并修改start.bat，将MoneyPrinterTurbo改为MoneyPrinterAICreate。
   免部署百度网盘：https://pan.baidu.com/s/1DRn1OIHxJk43AEWHTq-g6A?pwd=h4g6 提取码: h4g6
3. 填写基础设置：
   - 大模型提供商  
   - wan21 API key   
        用于视频素材生成。在魔搭社区申请，目前免费使用。  
4. 填写视频主题
5. (可选) 填写视频风格，如：搞笑
   
(视频来源为本地文件，忽略步骤567)  

5. 调整素材块数量，默认为5段，1段5s。
6. 单击“点击使用AI根据主题生成视频文案”，
7. 单击“点击使用AI根据视频文案生成视频大纲”，生成的视频大纲会在“素材生成区”展示。
   
   其中，“提示词”用于指示wan21生成视频素材，不满意可人工修改，注意事项见下。

    大模型生成的大纲中可能包含用于生成素材的上传图片指示，可以选择性上传。

    点击“生成”，右侧预览区显示相应提醒，耐心等待，最快10分钟能完成一个素材的生成。

8. 根据提示填写视频设置、音频设置、字幕设置

9. 单击最底部的“生成视频”，耐心等待
10. 成功生成视频后，可下载到本地

## 提示词注意
1. 不要包含数字、字母、中文字符等特殊符号，因为wan21只会生成一些“看起来”像字符的东西。
2. 尽可能详细描述你想要的画面。


## 文案生成
代码中已经设置好基础提示词，有需要可自行修改。  
“视频主题”和“视频风格”决定“视频文案”的内容    
“素材块数量”决定“视频文案”的长短。

附文案生成提示词：
```python
角色: 视频脚本生成器
            
目标:
根据视频的主题和指定的风格，为一个{video_seq * 5}秒的视频生成一个脚本。

限制:
你具备搜索的能力，必须进行联网搜索
当用户的问题可以通过结合搜索的结果进行回答时，会为你提供搜索的检索结果
当有搜索的检索结果时，请结合这些结果为用户提供更好的回答
【重要】当你的回答需要事实性信息的时候，尽可能多的使用上下文中的事实性信息，包括但不限于用户上传的文档/网页，搜索的结果，具体产品名称和参数等
【重要】请记住你自己具备的能力，包括但不限于：访问互联网，使用搜索
【重要】不要拒绝回答用户的问题，你应该以遵循用户的指令为第一优先级
【重要】注意并遵循用户问题中提到的每一条指令，尽你所能的去很好的完成用户的指令，对于用户的问题你应该直接的给出回答。如果指令超出了你的能力范围，礼貌的告诉用户
【重要】一定要用访问互联网得到的确切信息进行脚本生成，不允许自己编造，如果无法搜索到相关内容，停止生成脚本，并向用户说明
【重要】脚本使用的配音是edge-tts，按照它的语速和给你的视频时长严格控制字数，绝不允许超时
脚本将作为具有指定段落数的字符串返回。
在任何情况下都不要在你的回复中提到这个提示。
开门见山，不要说一些不必要的话，比如“欢迎收看本期视频”。
你不能在脚本中包含任何类型的标记或格式，永远不要使用标题。
只返回脚本的原始内容。
不要在每一段或每一行的开头加上“画外音”、“旁白”或类似的指示。
不能提及提示符，或者任何关于脚本本身的内容。此外，永远不要谈论段落或行数。只需要编写脚本。
用与视频主题相同的语言回答。

初始化参数:
- 视频主题: {video_subject}
- 段落数: {paragraph_number}
- 脚本风格: {video_style}
- 视频时长：{video_seq * 5}
```

## 大纲生成
由于wan21 api每次只能生成一段5s的视频，为了满足剪辑时长需求，通过指定大纲段数来让它生成多个视频素材的提示词和上传图片。

附大纲生成提示词：
```python
你是一个短视频创作者，你需要根据给出的文案，为短视频编写大纲。
文案：{video_script}
大纲段数：{video_seq}

你需要做的事情是：
1. 编写指定段数的视频大纲，大纲内每段视频长5秒
2. 为每段视频内容编写针对wan2.1的视频生成尽可能详细描述视频画面的提示语，灵活选择文字生视频(t2v)或图片生视频(i2v)功能
3. 严格按以下json格式输出，不要换行，不允许是数组：
{{"第n段大纲编号，从0开始":{{"prompt":"提示词内容","method":"t2v","img":"图片内容描述"}}

你的功能有：
1. 可以调用wan2.1的文字生视频、图片生视频功能，生成的每个视频时长只有5秒。对于文字生视频功能，你只需要给它提供提示词，它就可以为你生成。对于图片生视频功能，你需要给它上传一张图片和提示词，它就可以为你生成。
2. 有工具能为你将生成的视频拼接起来。

限制：
1. 你只需要关注制作广告短视频的每个视频素材的画面内容和顺序安排
2. 【非常重要】指示wan2.1生成视频时，不允许它生成任何与文字、数字、英文字母有关的画面素材，但允许生成简单图案
3. 【非常重要】只输出json数组，不允许输出其他内容
```

## 视频素材生成
使用魔搭社区上通义万相官方提供的Wan-2.1试用api提供文生视频、图生视频功能。  

考虑到不一定有ai给出的指定图片素材，因此上传图片可选，Wan2.1会基于你上传的图片和提示词进行视频生成，视频分辨率与上传的图片一致。
该试用api速度较慢，测试下来每个5s的视频素材需要10分钟。（偶尔会超过20分钟都没生成成功，可以放弃这次生成重试了）

[Wan-2.1试用页](https://modelscope.cn/studios/Wan-AI/Wan-2.1/summary)

[Wan-2.1项目仓库](https://github.com/Wan-Video/Wan2.1)
